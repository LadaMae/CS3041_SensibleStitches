<!DOCTYPE html>

<html id="projectTemplate">
    <head>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/> 
        <link rel="stylesheet" type="text/css" href="dropdown.css" media="screen and (orientation:portrait)"/>
        <link rel="stylesheet" type="text/css" href="projectDetails.css" media="screen and (orientation:portrait)"/>
    </head>

    <body>

        <div id = "header">
            <!--Dropdown-->
            <div class = "dropdown">
                <button onClick = "dropdown()" class = "dropbtn">Navigate<i id="dropdownSymbol" class = "glyphicon glyphicon-chevron-down" style = "font-size:40px; float:right; margin-top: 10px;"></i></button>
                <div id="myDropdown" class = "dropdown-content">
                    <a href = "projects.html">Projects<i class = "glyphicon glyphicon-chevron-right" style = "font-size:30px; float:right;"></i></a>
                    <a href = "links.html">Links<i class = "glyphicon glyphicon-chevron-right" style = "font-size:30px; float:right;"></i></a>
                    <a href = "patterns.html">Patterns<i class = "glyphicon glyphicon-chevron-right" style = "font-size:30px; float:right;"></i></a>
                </div>
            </div>
            <!--Project Title-->
        </div>


        <div>
            <h1 class = "projectHeader">Project 1</h1>
            <h2 id = "currTab" class = "topicText">select a tab to get started</h2>
            <hr class = "rounded">
        </div>

        <div class="projectTabs">
            <button class="tabLinks" onclick="openTab(event, 'refImages')"><i class = "glyphicon glyphicon-picture" style = "font-size:80px; float:center;"></i></button>
            <button class="tabLinks" onclick="openTab(event, 'notes')"><i class = "glyphicon glyphicon-pencil" style = "font-size:80px; float:center;"></i></button>
            <button class="tabLinks" onclick="openTab(event, 'measurements')"><i class = "glyphicon glyphicon-scissors" style = "font-size:80px; float:center;"></i></button>
            <button class="tabLinks" onclick="openTab(event, 'finishedPhotos')"><i class = "glyphicon glyphicon-camera" style = "font-size:80px; float:center;"></i></button>
        </div>

        <!-- Tab content -->
        <div id="refImages" class="tabContent">
            <div class = "refImageGallery"></div>

            <div class = "addRefPhoto">
                <input type="file" id="refFileInput" accept="image/*" style="display: none;" onchange="displayImage(this, '.refImageGallery')">
                <button class="addRefButton" onclick="document.getElementById('refFileInput').click()">
                    <i class="glyphicon glyphicon-plus" style = "font-size: 64px; color: #FBFEFB;"></i>
                </button>
            </div>
        </div>
        
        <div id="notes" class="tabContent">
            <div id="patternNavigation" class="patternList">
                <a href="#" class="projectNote" onclick="toggleNotes('pattern1', this)">Pattern 1<i class = "glyphicon glyphicon-chevron-down" style = "font-size:30px; float:right;margin-top: 10px;"></i></a>
                <a href="#" class="projectNote" onclick="toggleNotes('pattern2', this)">Pattern 2<i class = "glyphicon glyphicon-chevron-down" style = "font-size:30px; float:right;margin-top: 10px;"></i></a>
                <a href="#" class="projectNote" onclick="toggleNotes('pattern3', this)">Pattern 3<i class = "glyphicon glyphicon-chevron-down" style = "font-size:30px; float:right;margin-top: 10px;"></i></a>
            </div>

            <div id = "noteCollection">

                <div id="pattern1" class="notes">
                    <p>Notes for Pattern 1</p>
                </div>

                <div id="pattern2" class="notes">
                    <p>Notes for Pattern 2</p>
                </div>
                
                <div id="pattern3" class="notes">
                    <p>Notes for Pattern 3</p>
                </div>
            </div>

            <div class = "noteButtonDiv">
                <button class="addNoteButton" onclick="addNote()">
                    <i class="glyphicon glyphicon-plus" style = "font-size: 64px; color: #FBFEFB;"></i>
                </button>
            </div>
            
        </div>
        
        
        <div id="measurements" class="tabContent">
            <div id="measNavigation" class="measList">
                <a href="#" class="measDivider" onclick="toggleMeas('head', this)">Head<i class = "glyphicon glyphicon-chevron-down" style = "font-size:30px; float:right;margin-top: 10px;"></i></a>
                <a href="#" class="measDivider" onclick="toggleMeas('torso', this)">Torso<i class = "glyphicon glyphicon-chevron-down" style = "font-size:30px; float:right;margin-top: 10px;"></i></a>
                <a href="#" class="measDivider" onclick="toggleMeas('bottom', this)">Bottom<i class = "glyphicon glyphicon-chevron-down" style = "font-size:30px; float:right;margin-top: 10px;"></i></a>
                <a href="#" class="measDivider" onclick="toggleMeas('limbs', this)">Limbs<i class = "glyphicon glyphicon-chevron-down" style = "font-size:30px; float:right;margin-top: 10px;"></i></a>
            </div>

            <div id = "head" class = "measurements">
                
            </div>

            <div id = "torso" class = "measurements">
                <div class = "measurementInput">
                    <h3>Torso</h3>
                    <input type = "text">
                </div>
                <div class = "measurementInput">
                    <h3>Shoulder</h3>
                    <input type = "text">
                </div>
                <div class = "measurementInput">
                    <h3>Bust</h3>
                    <input type = "text">
                </div>
                <div class = "measurementInput">
                    <h3>Waist</h3>
                    <input type = "text">
                </div>
                <div class = "measurementInput">
                    <h3>Hips</h3>
                    <input type = "text">
                </div>
                <div class = "measurementInput">
                    <h3>Bust Apex</h3>
                    <input type = "text">
                </div>
                <div class = "measurementInput">
                    <h3>Neck to Waist (Front)</h3>
                    <input type = "text">
                </div>
                <div class = "measurementInput">
                    <h3>Neck to Waist (Back)</h3>
                    <input type = "text">
                </div>
 
            </div>

            <div id = "bottom" class = "measurements">
                
            </div>

            <div id = "limbs" class = "measurements">
                
            </div>

        </div>

        <div id="finishedPhotos" class="tabContent">
            <div class = "finImageGallery"></div>

            <div class = "addFinPhoto">
                <input type="file" id="finFileInput" accept="image/*" style="display: none;" onchange="displayImage(this, '.finImageGallery')">
                <button class="addFinButton" onclick="document.getElementById('finFileInput').click()">
                    <i class="glyphicon glyphicon-plus" style = "font-size: 64px; color: #FBFEFB;"></i>
                </button>
            </div>
        </div>

        <script>
            function dropdown() {
                document.getElementById("dropdownSymbol").className = "glyphicon glyphicon-chevron-up";
                document.getElementById("myDropdown").classList.toggle("show");
            }
    
            window.onclick = function(event) {
                if (!event.target.matches('.dropbtn')) {
                    if (document.getElementById("dropdownSymbol").className == "glyphicon glyphicon-chevron-down")document.getElementById("dropdownSymbol").className = "glyphicon glyphicon-chevron-up";
                    if (document.getElementById("dropdownSymbol").className == "glyphicon glyphicon-chevron-up")document.getElementById("dropdownSymbol").className = "glyphicon glyphicon-chevron-down";
                    var dropdowns = document.getElementsByClassName("dropdown-content");
                    var i;
                    for (i = 0; i < dropdowns.length; i++) {
                        var openDropdown = dropdowns[i];
                        if (openDropdown.classList.contains('show')) {
                            openDropdown.classList.remove('show');
                        }
                    }
                }
            }

            function openTab(evt, tabFunction) {
                var i, tabContent, tabLinks;

                tabContent = document.getElementsByClassName("tabContent");
                for (i = 0; i < tabContent.length; i++) {
                    tabContent[i].style.display = "none";
                }
                tabLinks = document.getElementsByClassName("tabLinks");
                for (i = 0; i < tabLinks.length; i++) {
                    tabLinks[i].className = tabLinks[i].className.replace(" active", "");
                }

                document.getElementById(tabFunction).style.display = "block";
                evt.currentTarget.className += " active";

                switch(tabFunction)
                {
                    case "refImages":
                        document.getElementById("currTab").textContent = "Reference Images";
                        break;

                    case "notes":
                    document.getElementById("currTab").textContent = "Notes";
                    break;

                    case "measurements":
                    document.getElementById("currTab").textContent = "Measurements";
                    break;

                    case "finishedPhotos":
                    document.getElementById("currTab").textContent = "Finished Photos";
                    break;
                }

            }

            function displayImage(input, gallery) {
                var gallery = document.querySelector(gallery);

                // Check if any file is selected
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function(e) {
                        // Create an image element
                        var img = document.createElement('img');
                        img.src = e.target.result;
                        img.style.maxWidth = '100%';
                        img.style.maxHeight = '200px'; // Adjust height as needed
                        img.style.cursor = 'pointer'; // Set cursor to pointer to indicate clickable
                        gallery.appendChild(img);

                        // Add event listener to the image element to handle expanding and minimizing
                        img.addEventListener('click', function() {
                            if (img.style.maxHeight === 'none') {
                                // If the image is already expanded, minimize it
                                img.style.maxHeight = '200px';
                            } else {
                                // If the image is not expanded, expand it
                                img.style.maxHeight = 'none';
                            }
                        });

                        // Add event listener to the document to minimize the image when clicked outside
                        document.addEventListener('click', function(event) {
                            if (!img.contains(event.target)) {
                                img.style.maxHeight = '200px';
                            }
                        });
                    };

                    // Read the selected file as URL
                    reader.readAsDataURL(input.files[0]);
                }
            }

            function toggleNotes(noteName, link) {
                // Get the notes container
                var notes = document.getElementById(noteName);

                // Hide all other notes before showing the selected notes
                var allNotes = document.getElementsByClassName('notes');
                for (var i = 0; i < allNotes.length; i++) {
                    allNotes[i].style.display = 'none';
                }

                // Toggle the display of the selected notes
                if (notes.style.display === 'block') {
                    notes.style.display = 'none';
                } else {
                    // If the notes container is not displayed, insert it before the next sibling of the clicked link's parent node
                    link.parentNode.insertBefore(notes, link.nextSibling);
                    notes.style.display = 'block';
                }
            }

            function addNote() {
                var noteName = prompt("Enter title of note:");
                var noteBody = prompt("Enter note:");
                if (noteName && noteBody) {
                    var noteNav = document.getElementById("notes");
                    var newNote = document.createElement("div");
                    newNote.id = noteName;
                    newNote.className = "notes";
                    var noteInfo = document.createElement("p");
                    noteInfo.textContent = noteBody;
                    newNote.appendChild(noteInfo);

                    var noteCollection = document.getElementById("noteCollection");
                    noteCollection.appendChild(newNote);
                    
                    var newNoteNav = document.createElement("a");
                    newNoteNav.href = "#";
                    newNoteNav.className = "projectNote";
                    newNoteNav.onclick = function() {toggleNotes(noteName, this);};
                    newNoteNav.textContent = noteName;

                    noteNav.appendChild(newNoteNav);

                }
            }

            function toggleMeas(measTopic, link) {
                // Get the notes container
                var measInfo = document.getElementById(measTopic);

                // Hide all other notes before showing the selected notes
                var allmeasurements = document.getElementsByClassName('measurements');
                for (var i = 0; i < allmeasurements.length; i++) {
                    allmeasurements[i].style.display = 'none';
                }

                // Toggle the display of the selected notes
                if (measInfo.style.display === 'block') {
                    measInfo.style.display = 'none';
                } else {
                    // If the notes container is not displayed, insert it before the next sibling of the clicked link's parent node
                    link.parentNode.insertBefore(measInfo, link.nextSibling);
                    measInfo.style.display = 'block';
                }
            }



        </script>
    </body>
</html>